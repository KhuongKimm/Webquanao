
@{
    ViewBag.Title = "KhachHang";
    Layout = "~/Views/Shared/Admin.cshtml";
}

<script>
    function GetAllCustomers(a) {

       /* var url = 'https://localhost:44364/api/khachhangapi/';*/
       /* if (a != "")*/ url = 'https://localhost:44364/api/khachhangapi/?TenNguoidung=' + a
        $.ajax({
            url: url,
            method: 'GET',
            contentType: 'json',
            dataType: 'json',
            error: function (response) {
            },
            success: function (reponse) {

                var len = reponse.length;
                let table = '';
                for (var i = 0; i < len; ++i) {
                    table = table + '<tr>';
                    table = table + '<td>' + reponse[i].MaKH + '</td>';
                    table = table + '<td>' + reponse[i].TenNguoiDung + '</td>';
                    table = table + '<td>' + reponse[i].MatKhau + '</td>';
                    table = table + '<td>' + reponse[i].TenKH + '</td>';
                    table = table + '<td>' + reponse[i].DiaChi + '</td>';
                    table = table + '<td>' + reponse[i].DienThoai + '</td>';
                    table = table + '<td>' + reponse[i].Email + '</td>';
                    table = table + '<td>' + '<button type="button" class="btn btn-danger update-button" onclick="deleteKH(' + reponse[i].MaKH + ');">' + "Xóa" + '</button>' + '</td>';
                    table = table + '</tr>';
                }
                $('#allKH').html(table);

            },
            fail: function (response) {
            }
        });
    }
        function deleteKH(a) {
            var url = 'https://localhost:44364/api/khachhangapi/?id=' + a
            $.ajax({
                url: url,
                method: 'DELETE',
                contentType: 'json',
                dataType: 'json',
                success: function (reponse) {
                    console.log(reponse)
                    if (reponse == false) {
                        alert("Xoá không thành công!");
                    }
                    else {
                        console.log(url);
                        alert("Xoá thành công!");

                        GetAllCustomers(''); //Gọi đến hàm lấy dữ liệu lên bảng
                    }
                }
            });
        }
</script>
<div class="container-fluid">
    <div>
        <div class="input-group custom-search-form" style="margin-top:10px;">
            <input type="text" class="form-control" placeholder="Tìm kiếm tên sản phẩm" id="txtFindMK">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button">
                    <i class="fa fa-search"></i>
                </button>
            </span>
        </div>



        <div class="text-right" style="margin: 10px 0 10px 0">

        </div>
        @*<div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownSanPham" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    San Pham
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" id="txtSanPham">
                    <li><a href="#" onclick="GetAllCustomers();">Tat ca</a></li>
                    <li><a href="#" onclick=" GetCustomerByMa('NGiay');">Giay Nam</a></li>
                    <li><a href="#" onclick=" GetCustomerByMa('UGiay');">Giay Nu</a></li>
                    <li><a href="#" onclick=" GetCustomerByMa('NQA');">Do nam</a></li>
                    <li><a href="#" onclick=" GetCustomerByMa('UQA');">Do Nu</a></li>

                </ul>
            </div>*@
    </div>


    <div class="row">

        <div class="col-lg-12">
            <div class="table-responsive" id="test">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Ma KH</th>
                            <th>Tên tài khoản</th>
                            <th>Mật khẩu</th>
                            <th>Tên khách hàng</th>
                            <th>Địa chỉ  </th>
                            <th>Số ĐT </th>
                            <th>emai</th>

                        </tr>
                    </thead>

                    <tbody id="allKH">
                    </tbody>
                </table>
            </div>


        </div>
    </div>

</div>





